# DigitalOcean App Platform configuration
name: big-love-nodebb
services:
  - name: nodebb
    source_dir: /
    dockerfile_path: deployment/Dockerfile
    github:
      repo: your-username/big_love_app
      branch: main
    run_command: ""  # Uses Dockerfile ENTRYPOINT
    environment_slug: node-js
    instance_count: 1
    instance_size_slug: basic-xxs  # $5/month
    http_port: 4567
    health_check:
      http_path: /api
    envs:
      - key: NODE_ENV
        value: production
      - key: LOG_LEVEL
        value: info
      - key: NODEBB_SECRET
        value: your-secret-key-here  # Change this!
      - key: URL
        value: ${APP_URL}
      - key: DATABASE_URL
        value: ${big-love-postgres.DATABASE_URL}
    routes:
      - path: /
        preserve_path_prefix: false

databases:
  - name: big-love-postgres
    engine: PG
    version: "16"
    size_slug: db-s-1vcpu-1gb  # $15/month
    num_nodes: 1


